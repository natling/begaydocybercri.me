<!DOCTYPE html>
<html>

<head>
  <title>ｃｙｂｅｒｃｒｉｍｅ</title>
  <meta charset="UTF-8">
  <link rel="shortcut icon" href="favicon.png"/>
  <style>
    body {
      margin: 0px;
      width: 100vw;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      background: black;
      filter: blur(2px);
    }

    pre {
      position: absolute;
      margin: 0px;
      text-align: center;
      font-family: 'Courier';
      font-style: italic;
      font-size: 90px;
      letter-spacing: 45px;
      transition: transform 0.1s, color 0.1s;
      mix-blend-mode: color-dodge;
    }

    @keyframes blink {
      from { opacity: 0; }
      to   { opacity: 1; }
    }

    .cursor {
      animation: blink 0.5s ease infinite alternate;
    }
  </style>
</head>

<body>
</body>

<script>
  const settings = {
    layers : 8,

    message : 'would you\nlike to\ncommit\ncybercrime?\n\ny/n',

    colors : ['#ff0000', '#00ff00', '#0000ff'],

    jitter : {
      x : 5,
      y : 2,
    },

    delay : {
      style : {
        min : 100,
        max : 200,
      },

      message : {
        min : 2000,
        max : 3000,
      },

      character : {
        min : 100,
        max : 120,
      },
    },
  };

  const f = {
    randomIntegerInclusive : (min, max) => {
      min = Math.ceil(min);
      max = Math.floor(max);
      return Math.floor(Math.random() * (max - min + 1)) + min;
    },

    randomItem : array => array[Math.floor(Math.random() * array.length)],
  };

  const createLayers = () => {
    for (let i = 0; i < settings.layers; i++) {
      (i => {
        const pre = document.createElement('pre');
        document.body.appendChild(pre);

        const text = document.createElement('span');
        pre.appendChild(text);
        text.className = 'text';

        const cursor = document.createElement('span');
        pre.appendChild(cursor);
        cursor.className = 'cursor';
        cursor.innerHTML = '|';

        const style = () => {
          const x = f.randomIntegerInclusive(-settings.jitter.x, settings.jitter.x);
          const y = f.randomIntegerInclusive(-settings.jitter.y, settings.jitter.y);
          pre.style.transform = 'translate(' + x + 'px, ' + y + 'px)';

          pre.style.color = f.randomItem(settings.colors);

          const delay = f.randomIntegerInclusive(settings.delay.style.min, settings.delay.style.max);
          setTimeout(style, delay);
        }

        style();
      })(i);
    }
  }

  const type = () => {
    const start = () => {
      const texts = document.getElementsByClassName('text');

      for (let i = 0; i < texts.length; i++) {
        (i => {
          const addCharacter = () => {
            if (texts[i].innerHTML.length < settings.message.length) {
              texts[i].innerHTML = settings.message.slice(0, texts[i].innerHTML.length + 1);

              const delay = f.randomIntegerInclusive(settings.delay.character.min, settings.delay.character.max);
              setTimeout(addCharacter, delay);
            }
          }

          addCharacter();
        })(i);
      }
    }

    const delay = f.randomIntegerInclusive(settings.delay.message.min, settings.delay.message.max);
    setTimeout(start, delay);
  }

  createLayers();
  type();
</script>

</html>